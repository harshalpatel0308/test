//FacetlistController.js

({
    doInit : function(component, event, helper) {
        
           var action = component.get("c.getData");
            action.setCallback(this, function(a) {
                if(a.getState() === "SUCCESS"){
                    console.log(a.getReturnValue());
                    var retResponse = a.getReturnValue();
                    retResponse.sort(function(a, b) {
                       return parseInt(a.FaceLiftSortOrder) - parseFloat(b.FaceLiftSortOrder);
                   });
                    component.set("v.facetTop",retResponse);
                    console.log('after sorting'+JSON.stringify(retResponse));
                    
                    
                }
            });
            $A.enqueueAction(action);     
    },
    openFacet : function(component, event, helper) {
        var cmpTarget = component.find('pop');
        
        $A.util.removeClass(cmpTarget, 'slds-hide');
        $A.util.addClass(cmpTarget, 'slds-show');
    },
    PopulateData : function(component, event, helper) {
        //alert( event.currentTarget.id);
         helper.getTableData(component, event,event.currentTarget.id);
        //helper.dTable(component, event,event.currentTarget.id);
        //alert(event.getSource().get("v.value"));
    },
    closeFacet : function(component, event, helper) {
        var cmpTarget = component.find('pop');
        $A.util.removeClass(cmpTarget, 'slds-show');
        $A.util.addClass(cmpTarget, 'slds-hide');
        
        
    },
    toggle: function(component,event,helper){
        var toggleList=component.find("list");
        $A.util.toggleClass(toggleList,"toggle");
    },
    
        //Search Bar
         searchKeyChange: function(component, event) {

    // get the value of the new searchKey available in the event object
    var searchKey = event.getParam("searchKey");

    //invoke the findByName() method in the Apex controller
    var find = component.get("c.findByName");
    find.setParams({"searchKey": searchKey});

    /*
     * When the asynchronous call returns, you assign the
     *  list of facets returned by findByName() to the component's
     *  facets attribute.
     */
    find.setCallback(this, function(data) {
      //console.log(data.getReturnValue());
      component.set("v.facets", data.getReturnValue());
    });

    // adds the call to the queue of asynchronous server calls.
    $A.enqueueAction(find);
  },
      
      
      
    dTable: function (cmp, event, helper) {
        cmp.set('v.columns', [
            {label: 'action', fieldName: 'action', cellAttributes:{iconName: { fieldName: 'trendIcon1' }, 
                                                                    iconLabel: { fieldName: 'CRM' }, 
                                                                    iconPosition: 'right',
                                                                    iconAlternativeText: 'In CRM?' }},
            {label: 'Legal Name', fieldName: 'LegalName', type: 'text'},
            {label: 'WCIS SUP Name', fieldName: 'WcisSupName', type: 'text'},
            {label: 'Wholesale Customer/Prospect', fieldName: 'WCust', type: 'text'},
            {label: 'City', fieldName: 'city', type: 'text'},
            {label: 'State', fieldName: 'state', type: 'text'},
            {label: 'Country', fieldName: 'country', type: 'text'}
        ]);
   /*    var myJson= [{
            id: 'a',
            LegalName: 'Cloudhub',
            WcisSupName: 'xxx',
            WCust: 'asfadfu',
            city: 'New York',
            state: 'New York',
            country: 'United States',
            trendIcon1: 'utility:salesforce1',
            trendIcon2: 'utility:info'
        },{
                                 id: 'b',
                                 LegalName: 'Quip',
                                 WcisSupName: 'yyy',
                                 WCust: 'afhagy',
                                 city: 'Atlanata',
                                 state: 'Atlanata',
                                 country: 'United States',
                                 trendIcon1: 'utility:salesforce1',
                                 trendIcon2: 'utility:info'
                             },{
                                 id: 'b',
                                 LegalName: 'Quip',
                                 WcisSupName: 'yyy',
                                 WCust: 'afhagy',
                                 city: 'New York',
                                 state: 'New York',
                                 country: 'United States',
                                 trendIcon1: 'utility:salesforce1',
                                 trendIcon2: 'utility:info'
                             },{
                                 id: 'b',
                                 LegalName: 'Quip',
                                 WcisSupName: 'yyy',
                                 WCust: 'afhagy',
                                 city: 'New York',
                                 state: 'New York',
                                 country: 'United States',
                                 trendIcon1: 'utility:salesforce1',
                                 trendIcon2: 'utility:info'
                             },{
                                 id: 'b',
                                 LegalName: 'Quip',
                                 WcisSupName: 'yyy',
                                 WCust: 'afhagy',
                                 city: 'New York',
                                 state: 'New York',
                                 country: 'United States',
                                 trendIcon1: 'utility:salesforce1',
                                 trendIcon2: 'utility:info'
                             },{
                                 id: 'b',
                                 LegalName: 'Quip',
                                 WcisSupName: 'yyy',
                                 WCust: 'afhagy',
                                 city: 'New York',
                                 state: 'New York',
                                 country: 'United States',
                                 trendIcon1: 'utility:salesforce1',
                                 trendIcon2: 'utility:info'
                             },{
                                 id: 'b',
                                 LegalName: 'Quip',
                                 WcisSupName: 'yyy',
                                 WCust: 'afhagy',
                                 city: 'New York',
                                 state: 'New York',
                                 country: 'United States',
                                 trendIcon1: 'utility:salesforce1',
                                 trendIcon2: 'utility:info'
                             },{
                                 id: 'b',
                                 LegalName: 'Quip',
                                 WcisSupName: 'yyy',
                                 WCust: 'afhagy',
                                 city: 'New York',
                                 state: 'New York',
                                 country: 'United States',
                                 trendIcon1: 'utility:salesforce1',
                                 trendIcon2: 'utility:info'
                             },{
                                 id: 'b',
                                 LegalName: 'Quip',
                                 WcisSupName: 'yyy',
                                 WCust: 'afhagy',
                                 city: 'New York',
                                 state: 'New York',
                                 country: 'United States',
                                 trendIcon1: 'utility:salesforce1',
                                 trendIcon2: 'utility:info'
                             },{
                                 id: 'b',
                                 LegalName: 'Quip',
                                 WcisSupName: 'yyy',
                                 WCust: 'afhagy',
                                 city: 'New York',
                                 state: 'New York',
                                 country: 'United States',
                                 trendIcon1: 'utility:salesforce1',
                                 trendIcon2: 'utility:info'
                             },
                             {
                                 id: 'b',
                                 LegalName: 'Quip',
                                 WcisSupName: 'yyy',
                                 WCust: 'afhagy',
                                 city: 'Albana',
                                 state: 'Albana',
                                 country: 'United States',
                                 trendIcon1: 'utility:salesforce1',
                                 trendIcon2: 'utility:info'
                             }];
          var filteredRes = [];
          
        //cmp.set('v.data', myJson);*/
    },
    getSelectedName: function (cmp, event) {
        var selectedRows = event.getParam('selectedRows');
        // Display that fieldName of the selected rows
        for (var i = 0; i < selectedRows.length; i++){
            alert("You selected: " + selectedRows[i].opportunityName);
        }
    }
    
});